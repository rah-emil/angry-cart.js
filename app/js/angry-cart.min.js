const angryCartKey="angry-cart";class AngryCart{constructor(t){this.$counter=document.querySelector(t.counter),this.$totalPrice=document.querySelectorAll(t.totalPrice),this.__init()}__init(){if(localStorage.getItem("angry-cart")){let t=JSON.parse(localStorage.getItem("angry-cart"));this.$counter.innerHTML=t.length,this.__save(t)}else localStorage.setItem("angry-cart",JSON.stringify([]))}__save(t){localStorage.setItem("angry-cart",JSON.stringify(t)),this.__calcTotal(),this.outputCart()}__calcTotal(){try{if(0!=this.$totalPrice.length){let t=JSON.parse(localStorage.getItem("angry-cart")),r=0;Array.from(t??[]).forEach(t=>{let a=t.data.price,e=t.quantity;r+=a*e}),Array.from(this.$totalPrice).forEach(t=>{t.innerHTML=r.toFixed(2)})}}catch(t){console.warn("No price for this item"),localStorage.setItem("angry-cart",JSON.stringify([]))}}outputCart(){try{angryCPR()}catch(t){console.warn("Function angryCPR() is not defined")}}addToCart(t,r){let a=JSON.parse(localStorage.getItem("angry-cart"))??null,e=a.find(r=>r.product_id===t);e?e.quantity++:a.push({product_id:t,quantity:1,data:r}),this.__save(a),this.$counter.innerHTML=a.length}removeFromCart(t){let r=JSON.parse(localStorage.getItem("angry-cart")??null),a=r.findIndex(r=>r.product_id===t);r.splice(a,1),this.__save(r),this.$counter.innerHTML=r.length}clearCart(){localStorage.setItem("angry-cart",JSON.stringify([])),this.$counter.innerHTML=0,this.__calcTotal(),this.outputCart()}}