const angryCartKey="angry-cart";class AngryCart{constructor(t){this.$counter=document.querySelector(t.counter),this.$cartPreview=document.querySelector(t.cartPreview),this.__init()}__render(t){this.$cartPreview.innerHTML="",Array.from(t).forEach(t=>{this.$cartPreview.insertAdjacentHTML("beforeEnd",`<h6>*Имя товара*</h6><span>id: ${t.product_id}, кол-во: ${t.quantity}</span><button class="btn btn-sm btn-danger" onclick="cart.removeFromCart(${t.product_id})">x</button><hr/>`)})}__init(){if(localStorage.getItem("angry-cart")){let t=JSON.parse(localStorage.getItem("angry-cart"))??[];this.$counter.innerHTML=t.length,this.__render(t)}else localStorage.setItem("angry-cart",null)}__save(t){localStorage.setItem("angry-cart",JSON.stringify(t)),console.log(t)}addToCart(t){let r=JSON.parse(localStorage.getItem("angry-cart"))??[],e=r.find(r=>r.product_id===t);e?e.quantity++:r.push({product_id:t,quantity:1}),this.__save(r),this.$counter.innerHTML=r.length}removeFromCart(t){let r=JSON.parse(localStorage.getItem("angry-cart"))??[],e=r.find(r=>r.product_id===t);r.splice(e),console.log(r),this.__render(r)}clearCart(){localStorage.setItem("angry-cart",null),this.$counter.innerHTML=0,this.$cartPreview.innerHTML=""}getCart(){console.log("Load products from cart")}}